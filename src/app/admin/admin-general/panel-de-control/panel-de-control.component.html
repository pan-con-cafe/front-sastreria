<div class="dashboard-container">

  <h1 class="dashboard-title">Panel de control</h1>

  <div class="dashboard-grid">

    <!-- PEDIDOS -->
    <div class="dashboard-card grande">
      <h3>Pedidos totales: {{ totalPedidos }}</h3>

      <div class="grafico-barras-vertical">
        <div class="barra-columna reservado">
          <div class="barra"
              [style.height]="totalPedidos > 0 ? (pedidosEstado.reservado / totalPedidos * 100) + '%' : '0%'">
            <span>{{ pedidosEstado.reservado }}</span>
          </div>
          <small>Reservado</small>
        </div>

        <div class="barra-columna proceso">
          <div class="barra"
              [style.height]="totalPedidos > 0 ? (pedidosEstado.proceso / totalPedidos * 100) + '%' : '0%'">
            <span>{{ pedidosEstado.proceso }}</span>
          </div>
          <small>En proceso</small>
        </div>

        <div class="barra-columna completado">
          <div class="barra"
              [style.height]="totalPedidos > 0 ? (pedidosEstado.completado / totalPedidos * 100) + '%' : '0%'">
            <span>{{ pedidosEstado.completado }}</span>
          </div>
          <small>Completado</small>
        </div>



      </div>
    </div>


    <!-- MODELOS -->
    <div class="dashboard-card grande">
      <h3>Modelos totales: {{ totalModelos }}</h3>
      <div class="modelo-content">
        <div class="pie-chart">
          <div class="pie" [style.background]="pieChartStyle"></div>

        </div>

        <div class="modelo-lista">
          <strong>Los 5 más solicitados:</strong>
          <ul>
            <li *ngFor="let modelo of modelosMasSolicitados">
              <span class="color-box" [style.background]="coloresModelos[modelosMasSolicitados.indexOf(modelo)]"></span>
              {{ modelo.nombre }} ({{ modelo.total }})
            </li>
          </ul>
        </div>

      </div>

      
    </div>


    <!-- FLUJO SEMANA -->
    <div class="dashboard-card">
      <h3>Flujo de la semana</h3>

      <div class="barras-semana">
        <div *ngFor="let d of diasMasOcupados" class="barra-semana-item">
          <span class="dia">{{ d.dia }}</span>
          <div class="barra-horizontal">
            <div class="relleno" [style.width.%]="d.widthEscalada"></div>
          </div>
          <span class="total">{{ d.total }} reservas</span>
        </div>
      </div>
    </div>



    <!-- HORARIO TOP -->
    <div class="dashboard-card">
      <h3>Horario más solicitado esta semana</h3>

      <div class="horario-destacado" *ngIf="horarioMasSolicitado">
        <span class="icono">⏰</span>
        <div>
          <strong>{{ horarioMasSolicitado.rango }}</strong>
          <p>{{ horarioMasSolicitado.total }} Reservas</p>
        </div>
      </div>
    </div>

  </div>
</div>
